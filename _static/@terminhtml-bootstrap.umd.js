(function(l){typeof define=="function"&&define.amd?define(l):l()})(function(){"use strict";var k=Object.defineProperty;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var S=(l,c,h)=>c in l?k(l,c,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[c]=h,f=(l,c)=>{for(var h in c||(c={}))j.call(c,h)&&S(l,h,c[h]);if(x)for(var h of x(c))U.call(c,h)&&S(l,h,c[h]);return l};var l=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,C=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,u=(r,t)=>{for(var e in t||(t={}))g.call(t,e)&&C(r,e,t[e]);if(p)for(var e of p(t))y.call(t,e)&&C(r,e,t[e]);return r},D=(r,t)=>c(r,h(t)),M=(r,t)=>{var e={};for(var n in r)g.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&p)for(var n of p(r))t.indexOf(n)<0&&y.call(r,n)&&(e[n]=r[n]);return e};function L(r){const t=typeof r=="string"?document.querySelector(r):r;if(!t)throw new Error("Container element not found");return t}function d(r){return/<\/?[a-z][\s\S]*>/i.test(r)}/**
 * termynal.js
 * A lightweight, modern and extensible animated terminal window, using
 * async/await.
 *
 * @author Ines Montani <ines@ines.io>
 * @version 0.0.1
 * @license MIT
 */const A=5;class H{constructor(t="#termynal",e={}){var n,i,s,a,o;this.startDelay=600,this.typeDelay=90,this.lineDelay=1500,this.speedMultiplier=1,this.container=L(t),this.customPfx=(n=e.prefix)!=null?n:"ty",this.pfx=`data-${this.customPfx}`,this.originalStartDelay=e.startDelay||parseFloat((i=this.container.getAttribute(`${this.pfx}-startDelay`))!=null?i:"")||600,this.originalTypeDelay=e.typeDelay||parseFloat((s=this.container.getAttribute(`${this.pfx}-typeDelay`))!=null?s:"")||90,this.originalLineDelay=e.lineDelay||parseFloat((a=this.container.getAttribute(`${this.pfx}-lineDelay`))!=null?a:"")||1500,this.progressLength=e.progressLength||parseFloat(this.container.getAttribute(`${this.pfx}-progressLength`)||"")||40,this.progressChar=e.progressChar||this.container.getAttribute(`${this.pfx}-progressChar`)||"\u2588",this.progressPercent=e.progressPercent||parseFloat((o=this.container.getAttribute(`${this.pfx}-progressPercent`))!=null?o:"")||100,this.cursor=e.cursor||this.container.getAttribute(`${this.pfx}-cursor`)||"\u258B",this.autoScroll=typeof e.autoScroll=="undefined"?!0:e.autoScroll,this.origAutoScroll=this.autoScroll,this.lines=this.lineDataToElements(e.lineData||[]),this.loadLines(),this.container.innerHTML="",e.noInit||this.init()}loadLines(){const t=this._generateSpeedControl();t.style.visibility="hidden",this.container.appendChild(t);for(const n of this.lines)n.style.visibility="hidden",this.container.appendChild(n);const e=this.generateRestart();e.style.visibility="hidden",this.container.appendChild(e),this.container.setAttribute("data-termynal","")}init(){const t=getComputedStyle(this.container),e=t.width!=="0px"?t.width:void 0;e&&(this.container.style.width=e);const n=t.minHeight!=="0px"?t.height:void 0;n&&(this.container.style.minHeight=n),this.container.setAttribute("data-termynal",""),this.container.innerHTML="";for(const i of this.lines)i.style.visibility="visible";this.start().catch(i=>console.error(i))}_scrollToBottom(){this.autoScroll&&(this.container.scrollTop=this.container.scrollHeight)}_toggleAutoScrollBasedOnUserInteraction(){this._isAtBottom()?this.autoScroll=this.origAutoScroll:this.autoScroll=!1}_distanceFromBottom(){return this.container.scrollHeight-this.container.scrollTop-this.container.clientHeight}_isAtBottom(){return this._distanceFromBottom()<=A}async start(){this.addFinish(),await this._wait(this.startDelay);for(const t of this.lines){const e=t.getAttribute(this.pfx),n=t.getAttribute(`${this.pfx}-delay`)||this.lineDelay,i=!!t.getAttribute(`${this.pfx}-carriageReturn`);this._toggleAutoScrollBasedOnUserInteraction(),e=="input"?(t.setAttribute(`${this.pfx}-cursor`,this.cursor),await this.type(t),await this._wait(n)):e=="progress"?(await this.progress(t),await this._wait(n)):(this.container.appendChild(t),this._scrollToBottom(),await this._wait(n)),i&&this.container.removeChild(t),t.removeAttribute(`${this.pfx}-cursor`)}this.addRestart(),this.speedControlElement&&(this.speedControlElement.style.visibility="hidden"),this.lineDelay=this.originalLineDelay,this.typeDelay=this.originalTypeDelay,this.startDelay=this.originalStartDelay}generateRestart(){const t=document.createElement("a");return t.onclick=e=>{e.preventDefault(),this.container.innerHTML="",this.init()},t.href="#",t.setAttribute("data-terminal-control",""),t.innerHTML="restart \u21BB",t}_generateSpeedControl(){const t=document.createElement("span");t.setAttribute("data-terminal-speed-control-container","");const e=document.createElement("span");e.setAttribute("data-terminal-speed-control","");const n=document.createElement("a"),i=document.createElement("span");n.onclick=a=>{a.preventDefault(),console.log("slow down"),this.speedMultiplier=this.speedMultiplier/2,i.innerHTML=`${this.speedMultiplier}x`},n.innerHTML="\u25C4",n.setAttribute("data-terminal-control",""),e.appendChild(n),i.innerHTML=`${this.speedMultiplier}x`,e.appendChild(i);const s=document.createElement("a");return s.onclick=a=>{a.preventDefault(),console.log("speed up"),this.speedMultiplier=this.speedMultiplier*2,i.innerHTML=`${this.speedMultiplier}x`},s.innerHTML="\u25BA",s.setAttribute("data-terminal-control",""),e.appendChild(s),t.appendChild(e),this.speedControlElement=t,t}addRestart(){const t=this.generateRestart();this.container.appendChild(t)}addFinish(){const t=this._generateSpeedControl();this.container.appendChild(t)}async type(t){const e=[...t.textContent||""];t.textContent="",this.container.appendChild(t),this._scrollToBottom();for(const n of e){const i=t.getAttribute(`${this.pfx}-typeDelay`)||this.typeDelay;await this._wait(i),t.textContent+=n}}async progress(t){var e;const n=parseFloat((e=t.getAttribute(`${this.pfx}-progressLength`))!=null?e:"")||this.progressLength,s=(t.getAttribute(`${this.pfx}-progressChar`)||this.progressChar).repeat(n),a=t.getAttribute(`${this.pfx}-progressPercent`)||this.progressPercent;t.textContent="",this.container.appendChild(t);for(let o=1;o<s.length+1;o++){await this._wait(this.typeDelay);const v=Math.round(o/s.length*100);if(t.textContent=`${s.slice(0,o)} ${v}%`,v>a)break}}_wait(t){const n=(typeof t=="string"?parseFloat(t):t)/this.speedMultiplier;return new Promise(i=>setTimeout(i,n))}lineDataToElements(t){return t.map(e=>{var n;const i=document.createElement("div"),s=(n=e.value)!=null?n:"";return i.innerHTML=$(s,this.customPfx)?s:`<span ${this._attributes(e)}>${s}</span>`,i.firstElementChild})}_attributes(t){let e="";for(const n in t)if(e+=this.pfx,n==="type")e+=`="${t[n]}" `;else if(n!=="value"){const i=t[n];e+=`-${n}="${i}" `}return e}}function E(r){return r.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return+t==0?"":e===0?t.toLowerCase():t.toUpperCase()})}function $(r,t){if(!d(r))return!1;const e=document.createElement("div");e.innerHTML=r;const n=e.firstElementChild;if(!n)return console.warn(`Detected incomplete HTML element ${r} on its own line. Keep HTML blocks on the same line`),!1;const i=E(t);for(const s in n.dataset)if(s.startsWith(i))return!0;return!1}const P="\r",O={promptLiteralStart:"$ ",customPromptLiteralStart:"# ",initNow:!1,autoScroll:!0};class B{constructor(t="#termynal",e={}){this.container=L(t),this.options=u(u({},O),e);const n=e,{initNow:i}=n,s=M(n,["initNow"]),a=this._createLineData(),o=D(u({},s),{noInit:!i,lineData:a});this.termynal=new H(t,o)}init(){this.termynal.init()}_createLineData(){const t=this.container.innerHTML.split(`
`),e=[];for(let n=0;n<t.length;n++){const i=t[n];if(i.startsWith("// "))e.push({value:"\u{1F4AC} "+i.replace("// ","").trimEnd(),class:"termynal-comment",delay:0});else if(T(i,this.options.promptLiteralStart)){const s=m(i,{replacements:[{searchValue:this.options.promptLiteralStart,replaceValue:""}],type:"input"});e.push({type:"input",value:s})}else if(T(i,this.options.customPromptLiteralStart)){const s=i.indexOf(this.options.promptLiteralStart);s===-1&&console.error("Custom prompt found but no end delimiter",i);const a=i.slice(0,s).replace(this.options.customPromptLiteralStart,""),o=m(i.slice(s+this.options.promptLiteralStart.length),{type:"input",prompt:a});e.push({type:"input",value:o,prompt:a})}else if(i.indexOf("\r")!==-1){const s=m(i,{replacements:[{searchValue:P,replaceValue:""}],carriageReturn:!0});e.push({value:s,carriageReturn:!0})}else e.push({value:i})}return e}}function T(r,t){return R(r).startsWith(t)}function R(r){var t;if(!d(r))return r;const e=document.createElement("div"),n=r.trim(),i=n.startsWith("<")?n:r;return e.innerHTML=i,(t=e.textContent)!=null?t:""}function m(r,t={}){var e;const n=(e=t.replacements)!=null?e:[];if(!d(r))return _(r,n).trimEnd();const i=document.createElement("div");i.innerHTML=r;const s=i.firstElementChild;if(!s)throw new Error("No element found in string");return w(s,n),t.type==="input"&&s.setAttribute("data-ty","input"),t.prompt&&s.setAttribute("data-ty-prompt",t.prompt),t.carriageReturn&&s.setAttribute("data-ty-carriageReturn","true"),s.outerHTML}function _(r,t){return t.reduce((e,n)=>e.replace(n.searchValue,n.replaceValue),r)}function w(r,t){for(const e of r.childNodes)if(e.childNodes.length>0)w(e,t);else{const n=e.textContent;e.textContent=_(n!=null?n:"",t)}}const F={class:"terminhtml"};function V(r){window.addEventListener("load",()=>I(r))}function I(r){W();const e=f(f({},F),r).class;return N(e)}function N(r){const t=document.querySelectorAll(`.${r}`),e=[];for(const a of t){const o=new B(a);e.push(o)}let n=[...e];function i(){n=n.filter(a=>a.container.getBoundingClientRect().top-innerHeight<=0?(a.init(),!1):!0)}window.addEventListener("scroll",i);const s=()=>window.removeEventListener("scroll",i);return setTimeout(i,50),{stopListener:s,terminHTMLs:e}}const b="terminhtml-styles";function W(){if(!document.getElementById(b)){const r=document.getElementsByTagName("head")[0],t=document.createElement("link");t.id=b,t.rel="stylesheet",t.type="text/css",t.href="https://unpkg.com/terminhtml@1.0.0-alpha.17/dist/src/termynal.css",t.media="all",r.appendChild(t)}}V()});
//# sourceMappingURL=@terminhtml-bootstrap.umd.js.map
