(function(l){typeof define=="function"&&define.amd?define(l):l()})(function(){"use strict";var W=Object.defineProperty;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var D=(l,c,h)=>c in l?W(l,c,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[c]=h,m=(l,c)=>{for(var h in c||(c={}))j.call(c,h)&&D(l,h,c[h]);if(x)for(var h of x(c))k.call(c,h)&&D(l,h,c[h]);return l};var l=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,v=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,p=(r,t)=>{for(var e in t||(t={}))y.call(t,e)&&v(r,e,t[e]);if(u)for(var e of u(t))g.call(t,e)&&v(r,e,t[e]);return r},S=(r,t)=>c(r,h(t)),E=(r,t)=>{var e={};for(var n in r)y.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&u)for(var n of u(r))t.indexOf(n)<0&&g.call(r,n)&&(e[n]=r[n]);return e};function L(r){const t=typeof r=="string"?document.querySelector(r):r;if(!t)throw new Error("Container element not found");return t}function f(r){return/<\/?[a-z][\s\S]*>/i.test(r)}/**
 * termynal.js
 * A lightweight, modern and extensible animated terminal window, using
 * async/await.
 *
 * @author Ines Montani <ines@ines.io>
 * @version 0.0.1
 * @license MIT
 */class H{constructor(t="#termynal",e={}){var n,i,s,a,o;this.startDelay=600,this.typeDelay=90,this.lineDelay=1500,this.container=L(t),this.customPfx=(n=e.prefix)!=null?n:"ty",this.pfx=`data-${this.customPfx}`,this.originalStartDelay=e.startDelay||parseFloat((i=this.container.getAttribute(`${this.pfx}-startDelay`))!=null?i:"")||600,this.originalTypeDelay=e.typeDelay||parseFloat((s=this.container.getAttribute(`${this.pfx}-typeDelay`))!=null?s:"")||90,this.originalLineDelay=e.lineDelay||parseFloat((a=this.container.getAttribute(`${this.pfx}-lineDelay`))!=null?a:"")||1500,this.progressLength=e.progressLength||parseFloat(this.container.getAttribute(`${this.pfx}-progressLength`)||"")||40,this.progressChar=e.progressChar||this.container.getAttribute(`${this.pfx}-progressChar`)||"\u2588",this.progressPercent=e.progressPercent||parseFloat((o=this.container.getAttribute(`${this.pfx}-progressPercent`))!=null?o:"")||100,this.cursor=e.cursor||this.container.getAttribute(`${this.pfx}-cursor`)||"\u258B",this.autoScroll=typeof e.autoScroll=="undefined"?!0:e.autoScroll,this.origAutoScroll=this.autoScroll,this.lines=this.lineDataToElements(e.lineData||[]),this.loadLines(),e.noInit||this.init()}loadLines(){const t=this.generateFinish();t.style.visibility="hidden",this.container.appendChild(t);for(const n of this.lines)n.style.visibility="hidden",this.container.appendChild(n);const e=this.generateRestart();e.style.visibility="hidden",this.container.appendChild(e),this.container.setAttribute("data-termynal","")}init(){const t=getComputedStyle(this.container),e=t.width!=="0px"?t.width:void 0;e&&(this.container.style.width=e);const n=t.minHeight!=="0px"?t.height:void 0;n&&(this.container.style.minHeight=n),this.container.setAttribute("data-termynal",""),this.container.innerHTML="";for(const i of this.lines)i.style.visibility="visible";this.start().catch(i=>console.error(i))}_scrollToBottom(){this.autoScroll&&(this.container.scrollTop=this.container.scrollHeight)}_toggleAutoScrollBasedOnUserInteraction(){this.container.scrollTop!==this.container.scrollHeight-this.container.clientHeight?this.autoScroll=!1:this.autoScroll=this.origAutoScroll}async start(){this.addFinish(),await this._wait(this.startDelay);for(const t of this.lines){const e=t.getAttribute(this.pfx),n=t.getAttribute(`${this.pfx}-delay`)||this.lineDelay,i=!!t.getAttribute(`${this.pfx}-carriageReturn`);this._toggleAutoScrollBasedOnUserInteraction(),e=="input"?(t.setAttribute(`${this.pfx}-cursor`,this.cursor),await this.type(t),await this._wait(n)):e=="progress"?(await this.progress(t),await this._wait(n)):(this.container.appendChild(t),this._scrollToBottom(),await this._wait(n)),i&&this.container.removeChild(t),t.removeAttribute(`${this.pfx}-cursor`)}this.addRestart(),this.finishElement&&(this.finishElement.style.visibility="hidden"),this.lineDelay=this.originalLineDelay,this.typeDelay=this.originalTypeDelay,this.startDelay=this.originalStartDelay}generateRestart(){const t=document.createElement("a");return t.onclick=e=>{e.preventDefault(),this.container.innerHTML="",this.init()},t.href="#",t.setAttribute("data-terminal-control",""),t.innerHTML="restart \u21BB",t}generateFinish(){const t=document.createElement("a");return t.onclick=e=>{e.preventDefault(),this.lineDelay=0,this.typeDelay=0,this.startDelay=0},t.href="#",t.setAttribute("data-terminal-control",""),t.innerHTML="fast \u2192",this.finishElement=t,t}addRestart(){const t=this.generateRestart();this.container.appendChild(t)}addFinish(){const t=this.generateFinish();this.container.appendChild(t)}async type(t){const e=[...t.textContent||""];t.textContent="",this.container.appendChild(t),this._scrollToBottom();for(const n of e){const i=t.getAttribute(`${this.pfx}-typeDelay`)||this.typeDelay;await this._wait(i),t.textContent+=n}}async progress(t){var e;const n=parseFloat((e=t.getAttribute(`${this.pfx}-progressLength`))!=null?e:"")||this.progressLength,s=(t.getAttribute(`${this.pfx}-progressChar`)||this.progressChar).repeat(n),a=t.getAttribute(`${this.pfx}-progressPercent`)||this.progressPercent;t.textContent="",this.container.appendChild(t);for(let o=1;o<s.length+1;o++){await this._wait(this.typeDelay);const _=Math.round(o/s.length*100);if(t.textContent=`${s.slice(0,o)} ${_}%`,_>a)break}}_wait(t){const e=typeof t=="string"?parseFloat(t):t;return new Promise(n=>setTimeout(n,e))}lineDataToElements(t){return t.map(e=>{var n;const i=document.createElement("div"),s=(n=e.value)!=null?n:"";return i.innerHTML=P(s,this.customPfx)?s:`<span ${this._attributes(e)}>${s}</span>`,i.firstElementChild})}_attributes(t){let e="";for(const n in t)if(e+=this.pfx,n==="type")e+=`="${t[n]}" `;else if(n!=="value"){const i=t[n];e+=`-${n}="${i}" `}return e}}function A(r){return r.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return+t==0?"":e===0?t.toLowerCase():t.toUpperCase()})}function P(r,t){if(!f(r))return!1;const e=document.createElement("div");e.innerHTML=r;const n=e.firstElementChild;if(!n)return console.warn(`Detected incomplete HTML element ${r} on its own line. Keep HTML blocks on the same line`),!1;const i=A(t);for(const s in n.dataset)if(s.startsWith(i))return!0;return!1}const $="\r",M={promptLiteralStart:"$ ",customPromptLiteralStart:"# ",initNow:!1,autoScroll:!0};class O{constructor(t="#termynal",e={}){this.container=L(t),this.options=p(p({},M),e);const n=e,{initNow:i}=n,s=E(n,["initNow"]),a=this._createLineData(),o=S(p({},s),{noInit:!i,lineData:a});this.termynal=new H(t,o)}init(){this.termynal.init()}_createLineData(){const t=this.container.innerHTML.split(`
`),e=[];for(let n=0;n<t.length;n++){const i=t[n];if(i.startsWith("// "))e.push({value:"\u{1F4AC} "+i.replace("// ","").trimEnd(),class:"termynal-comment",delay:0});else if(w(i,this.options.promptLiteralStart)){const s=d(i,{replacements:[{searchValue:this.options.promptLiteralStart,replaceValue:""}],type:"input"});e.push({type:"input",value:s})}else if(w(i,this.options.customPromptLiteralStart)){const s=i.indexOf(this.options.promptLiteralStart);s===-1&&console.error("Custom prompt found but no end delimiter",i);const a=i.slice(0,s).replace(this.options.customPromptLiteralStart,""),o=d(i.slice(s+this.options.promptLiteralStart.length),{type:"input",prompt:a});e.push({type:"input",value:o,prompt:a})}else if(i.indexOf("\r")!==-1){const s=d(i,{replacements:[{searchValue:$,replaceValue:""}],carriageReturn:!0});e.push({value:s,carriageReturn:!0})}else e.push({value:i})}return e}}function w(r,t){return F(r).startsWith(t)}function F(r){var t;if(!f(r))return r;const e=document.createElement("div"),n=r.trim(),i=n.startsWith("<")?n:r;return e.innerHTML=i,(t=e.textContent)!=null?t:""}function d(r,t={}){var e;const n=(e=t.replacements)!=null?e:[];if(!f(r))return b(r,n).trimEnd();const i=document.createElement("div");i.innerHTML=r;const s=i.firstElementChild;if(!s)throw new Error("No element found in string");return C(s,n),t.type==="input"&&s.setAttribute("data-ty","input"),t.prompt&&s.setAttribute("data-ty-prompt",t.prompt),t.carriageReturn&&s.setAttribute("data-ty-carriageReturn","true"),s.outerHTML}function b(r,t){return t.reduce((e,n)=>e.replace(n.searchValue,n.replaceValue),r)}function C(r,t){for(const e of r.childNodes)if(e.childNodes.length>0)C(e,t);else{const n=e.textContent;e.textContent=b(n!=null?n:"",t)}}const R={class:"terminhtml"};function V(r){window.addEventListener("load",()=>B(r))}function B(r){N();const e=m(m({},R),r).class;return I(e)}function I(r){const t=document.querySelectorAll(`.${r}`),e=[];for(const a of t){const o=new O(a);e.push(o)}let n=[...e];function i(){n=n.filter(a=>a.container.getBoundingClientRect().top-innerHeight<=0?(a.init(),!1):!0)}window.addEventListener("scroll",i);const s=()=>window.removeEventListener("scroll",i);return i(),{stopListener:s,terminHTMLs:e}}const T="terminhtml-styles";function N(){if(!document.getElementById(T)){const r=document.getElementsByTagName("head")[0],t=document.createElement("link");t.id=T,t.rel="stylesheet",t.type="text/css",t.href="https://unpkg.com/terminhtml@1.0.0-alpha.14/dist/src/termynal.css",t.media="all",r.appendChild(t)}}V()});
//# sourceMappingURL=@terminhtml-bootstrap.umd.js.map
